{"version":3,"sources":["lib/compress-color.js","lib/read-image-as-base64.js","app.js","index.js"],"names":["componentToHex","c","hex","toString","length","compressColorRGB","rgbObj","rgb","r","g","b","Math","ceil","a","readImageAsBase64","url","callback","img","Image","crossOrigin","onload","canvas","document","createElement","ctx","getContext","height","this","width","drawImage","dataURL","toDataURL","src","base64ImageToRGBArray","base64ImageUtils","defaultSprites","Yoshi","name","sprites","scale","transition","alternate","sortMethod","Square","Mario","Pikachu","Supermario","SORT_METHODS","Diagonal","color","floor","x","y","Vertical","Horizontal","Brightness","rgbArrayToShadow","rgbArray","_","chain","filter","pixel","sortBy","map","compact","value","join","saveFrame","path","config","stateSet","base64","err","maxY","reduce","res","max","Infinity","minY","min","maxX","minX","abs","App","animationSpeedSrc","animationSpeedSet","useState","round","pow","animationSpeed","animationTransition","animationTransitionSet","alternateAnimation","alternateAnimationSet","currentSprite","currentSpriteSet","sortMethodSet","scaleSet","spriteA","spriteASet","shadow","spriteB","spriteBSet","useEffect","location","href","undefined","totalWidth","totalHeight","css","translationX","translationY","trim","onFileSelected","event","setFunction","reverse","stopPropagation","preventDefault","dt","dataTransfer","file","files","target","fr","window","FileReader","async","base64src","data","currentTarget","result","base64Str","maxMass","Promise","resolve","originalWidth","originalHeight","sqrt","resizeImage","saveFrame64","readAsDataURL","eventIgnore","accent","padding","h","style","fontWeight","display","backgroundColor","info","Object","keys","spriteKey","active","onClick","onDrop","evt","onDragOver","onDragEnter","alignItems","alignContent","justifyContent","imageRendering","aria-label","type","onChange","accept","w","className","sortMethodKey","flex","minWidth","e","Number","step","navigator","clipboard","writeText","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.76307cd2.chunk.js","sourcesContent":["// import tinycolor from \"tinycolor2\";\n\nfunction componentToHex(c) {\n  const hex = c.toString(16);\n  return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nfunction rgbToHex(r, g, b) {\n  return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n\nfunction compressColorRGB(rgbObj) {\n  const rgb = `rgb(${rgbObj.r},${rgbObj.g},${rgbObj.b},${Math.ceil((rgbObj.a / 255) * 10) / 10})`;\n\n  if (rgbObj.a < 240) return rgb;\n\n  // const hex = tinycolor(rgb).toHexString();\n\n  const hex = rgbToHex(rgbObj.r, rgbObj.g, rgbObj.b);\n\n  switch (\n    hex // based on CSS3 supported color names http://www.w3.org/TR/css3-color/\n  ) {\n    case \"#c0c0c0\":\n      return \"silver\";\n    case \"#808080\":\n      return \"gray\";\n    case \"#800000\":\n      return \"maroon\";\n    case \"#ff0000\":\n      return \"red\";\n    case \"#800080\":\n      return \"purple\";\n    case \"#008000\":\n      return \"green\";\n    case \"#808000\":\n      return \"olive\";\n    case \"#000080\":\n      return \"navy\";\n    case \"#008080\":\n      return \"teal\";\n  }\n  return hex[1] === hex[2] && hex[3] === hex[4] && hex[5] === hex[6] ? \"#\" + hex[1] + hex[3] + hex[5] : hex;\n}\n\nexport default compressColorRGB;\n","function readImageAsBase64(url, callback) {\n  const img = new Image();\n  img.crossOrigin = \"Anonymous\";\n  img.onload = function () {\n    let canvas = document.createElement(\"CANVAS\");\n    const ctx = canvas.getContext(\"2d\");\n    canvas.height = this.height;\n    canvas.width = this.width;\n    ctx.drawImage(this, 0, 0);\n    const dataURL = canvas.toDataURL();\n    callback(dataURL);\n    canvas = null;\n  };\n  img.src = url;\n}\n\nexport default readImageAsBase64;\n","import React, { useEffect, useState } from \"react\";\n\nimport _ from \"lodash\";\nimport compressColorRGB from \"./lib/compress-color.js\";\nimport readImageAsBase64 from \"./lib/read-image-as-base64.js\";\n\nimport base64ImageUtils from \"base64-image-utils\";\nconst { base64ImageToRGBArray } = base64ImageUtils;\n\nimport {\n  JBX,\n  Button,\n  Range,\n  HeaderH1,\n  HeaderH3,\n  HeaderH2,\n  Text,\n  Space,\n  Box,\n  A,\n  Ul,\n  Li,\n  Container,\n  Dropzone,\n  Inline,\n  Tabs,\n  Tab,\n  Code,\n} from \"jbx\";\n\nconst LOG_SCALE_FACTOR = 2.2;\n\nconst defaultSprites = {\n  Yoshi: {\n    name: \"Yoshi\",\n    sprites: [\"yoshi1.png\", \"yoshi2.png\"],\n  },\n  \"3 Dots\": {\n    name: \"3 Dots\",\n    sprites: [\"3dots1.png\", \"3dots2.png\"],\n    scale: 8,\n    transition: 80,\n    alternate: false,\n    sortMethod: \"Brightness\",\n  },\n  Square: {\n    name: \"Square\",\n    sprites: [\"square1.png\", \"square2.png\"],\n    scale: 12,\n    transition: 100,\n    alternate: false,\n    sortMethod: \"Brightness\",\n  },\n  Mario: {\n    name: \"Mario\",\n    sprites: [\"mario1.png\", \"mario2.png\"],\n  },\n  Pikachu: {\n    name: \"Pikachu\",\n    sprites: [\"pikachu.png\", \"raichu.png\"],\n    sortMethod: \"Brightness\",\n  },\n  Supermario: {\n    name: \"Super Mario\",\n    sprites: [\"supermario1.png\", \"supermario2.png\"],\n    sortMethod: \"Horizontal\",\n  },\n};\n\nfunction resizeImage(base64Str, maxMass = 64 * 50) {\n  return new Promise((resolve) => {\n    let img = new Image();\n    img.src = base64Str;\n    img.onload = () => {\n      let canvas = document.createElement(\"canvas\");\n\n      const originalWidth = img.width;\n      const originalHeight = img.height;\n\n      let width = img.width;\n      let height = img.height;\n\n      while (width * height > maxMass) {\n        width = width / Math.sqrt(2, 2);\n        height = height / Math.sqrt(2, 2);\n      }\n\n      width = Math.round(width);\n      height = Math.round(height);\n\n      canvas.width = width;\n      canvas.height = height;\n      let ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0, width, height);\n      resolve([canvas.toDataURL(), { originalWidth, originalHeight }]);\n    };\n  });\n}\n\nconst SORT_METHODS = {\n  Diagonal: [\n    (color) => {\n      return Math.floor((color.x - color.y) / 3);\n    },\n    (color) => {\n      return color.rgb.r + color.rgb.g + color.rgb.b;\n    },\n  ],\n  Vertical: [\n    (color) => {\n      return color.x;\n    },\n  ],\n  Horizontal: [\n    (color) => {\n      return color.y;\n    },\n  ],\n  Brightness: [\n    (color) => {\n      return Math.floor((color.rgb.r + color.rgb.g + color.rgb.b) / 2);\n    },\n  ],\n};\n\nfunction rgbArrayToShadow(rgbArray, { sortMethod = \"Brightness\", scale = 1 }) {\n  return _.chain(rgbArray)\n    .filter((pixel) => {\n      return !(pixel.rgb.a < 1 || (pixel.rgb.r > 254 && pixel.rgb.g > 254 && pixel.rgb.b > 254));\n    })\n    .sortBy(SORT_METHODS[sortMethod])\n    .map((pixel) => {\n      const color = compressColorRGB(pixel.rgb);\n      return `${color} ${(pixel.x + 1) * scale}px ${(pixel.y + 1) * scale}px`;\n    })\n    .compact()\n    .value()\n    .join(\",\");\n}\n\nfunction saveFrame(path, config, stateSet) {\n  readImageAsBase64(path, (base64) => {\n    base64ImageToRGBArray(base64, (err, rgbArray) => {\n      const maxY = rgbArray.reduce((res, rgb) => {\n        return Math.max(res, rgb.y);\n      }, -Infinity);\n      const minY = rgbArray.reduce((res, rgb) => {\n        return Math.min(res, rgb.y);\n      }, Infinity);\n\n      const maxX = rgbArray.reduce((res, rgb) => {\n        return Math.max(res, rgb.x);\n      }, -Infinity);\n      const minX = rgbArray.reduce((res, rgb) => {\n        return Math.min(res, rgb.x);\n      }, Infinity);\n\n      stateSet({\n        src: base64,\n        rgbArray,\n        height: Math.abs(maxY - minY) + 1,\n        width: Math.abs(maxX - minX) + 1,\n      });\n    });\n  });\n}\n\nfunction saveFrame64(base64, config, stateSet) {\n  base64ImageToRGBArray(base64, (err, rgbArray) => {\n    const maxY = rgbArray.reduce((res, rgb) => {\n      return Math.max(res, rgb.y);\n    }, -Infinity);\n    const minY = rgbArray.reduce((res, rgb) => {\n      return Math.min(res, rgb.y);\n    }, Infinity);\n\n    const maxX = rgbArray.reduce((res, rgb) => {\n      return Math.max(res, rgb.x);\n    }, -Infinity);\n    const minX = rgbArray.reduce((res, rgb) => {\n      return Math.min(res, rgb.x);\n    }, Infinity);\n\n    stateSet({\n      src: base64,\n      rgbArray,\n      height: Math.abs(maxY - minY) + 1,\n      width: Math.abs(maxX - minX) + 1,\n    });\n  });\n}\n\nfunction App() {\n  const [animationSpeedSrc, animationSpeedSet] = useState(Math.round(Math.pow(1000, 1 / LOG_SCALE_FACTOR)));\n  const animationSpeed = Math.round(Math.pow(animationSpeedSrc, LOG_SCALE_FACTOR)) + 11 + 16;\n  const [animationTransition, animationTransitionSet] = useState(25);\n  const [alternateAnimation, alternateAnimationSet] = useState(true);\n\n  const [currentSprite, currentSpriteSet] = useState(\"Yoshi\");\n  const [sortMethod, sortMethodSet] = useState(\"Vertical\");\n  const [scale, scaleSet] = useState(5);\n\n  const [spriteA, spriteASet] = useState({\n    shadow: null,\n    height: 5,\n    width: 5,\n  });\n  const [spriteB, spriteBSet] = useState({\n    shadow: null,\n    height: 5,\n    width: 5,\n  });\n\n  useEffect(() => {\n    if (!currentSprite) return;\n\n    saveFrame(`${document.location.href}/sprites/${defaultSprites[currentSprite].sprites[0]}`, { scale }, spriteASet);\n    saveFrame(`${document.location.href}/sprites/${defaultSprites[currentSprite].sprites[1]}`, { scale }, spriteBSet);\n\n    // const { scale = 3, transition = 25, alternate = false } = defaultSprites[currentSprite];\n\n    spriteASet({\n      shadow: null,\n      height: 0,\n      width: 0,\n    });\n    spriteBSet({\n      shadow: null,\n      height: 0,\n      width: 0,\n    });\n\n    scaleSet(defaultSprites[currentSprite].scale || 3);\n    animationTransitionSet(defaultSprites[currentSprite].transition || 25);\n    alternateAnimationSet(\n      defaultSprites[currentSprite].alternate === undefined ? true : defaultSprites[currentSprite].alternate\n    );\n    sortMethodSet(defaultSprites[currentSprite].sortMethod || \"Vertical\");\n  }, [currentSprite]);\n\n  const totalWidth = Math.max(spriteA.width, spriteB.width) * scale;\n  const totalHeight = Math.max(spriteA.height, spriteB.height) * scale;\n\n  const css = `\n@keyframes morphin {\n  0%, ${50 - animationTransition / 2}% {\n    box-shadow: ${rgbArrayToShadow(spriteA.rgbArray, {\n      scale,\n      sortMethod,\n      translationX: totalWidth / -2,\n      translationY: totalHeight / -2,\n    })};\n  }\n  ${50 + animationTransition / 2}%, 100% {\n    box-shadow: ${rgbArrayToShadow(spriteB.rgbArray, {\n      scale,\n      sortMethod,\n      translationX: totalWidth / -2,\n      translationY: totalHeight / -2,\n    })};\n  }\n}\n\n.pixel {\n  height: ${scale}px;\n  width: ${scale}px;\n  margin: ${-scale}px ${totalHeight + scale * 2}px ${totalWidth + scale * 2}px ${-scale}px;\n  animation: morphin ${animationSpeed}ms infinite${\n    alternateAnimation ? \" alternate \" : \" \"\n  }cubic-bezier(0.45, 0, 0.55, 1);\n}`.trim();\n\n  function onFileSelected(event, setFunction, reverse) {\n    currentSpriteSet(null);\n    event.stopPropagation();\n    event.preventDefault();\n\n    const dt = event.dataTransfer;\n    const files = dt ? dt.files : event.target.files;\n    const file = files[0];\n\n    const fr = new window.FileReader();\n\n    fr.onload = async (data) => {\n      const base64src = data.currentTarget.result;\n\n      const [base64] = await resizeImage(base64src);\n\n      saveFrame64(base64, { scale, reverse }, setFunction);\n    };\n    fr.readAsDataURL(file);\n  }\n\n  function eventIgnore(event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  return (\n    <Container>\n      <JBX accent={\"#ab99cf\"} />\n      <Box padding={2}>\n        <Space h={1} />\n        <HeaderH1\n          style={{\n            fontWeight: 900,\n            display: \"inline-block\",\n            width: \"auto\",\n            padding: \"6px\",\n            backgroundColor: \"var(--accent-color)\",\n          }}>\n          morphin\n        </HeaderH1>\n        <Space h={1} />\n        <Text>\n          Tool that creates animated CSS transitions. Add sprites and get the code ready to paste in your site.\n        </Text>\n        <Space h={2} />\n        <Tabs>\n          <Inline>\n            <Tab info>\n              <Text>Examples: </Text>\n            </Tab>\n            {Object.keys(defaultSprites).map((spriteKey) => (\n              <Tab\n                active={currentSprite === spriteKey}\n                key={spriteKey}\n                onClick={() => {\n                  currentSpriteSet(spriteKey);\n                }}>\n                <Text>{spriteKey}</Text>\n              </Tab>\n            ))}\n          </Inline>\n        </Tabs>\n        <Space h={1} />\n        <Inline>\n          <Dropzone\n            onDrop={(evt) => onFileSelected(evt, spriteASet)}\n            onDragOver={eventIgnore}\n            onDragEnter={eventIgnore}>\n            <div\n              style={{\n                display: \"flex\",\n                height: 48,\n                width: 48,\n                alignItems: \"center\",\n                alignContent: \"center\",\n                justifyContent: \"center\",\n              }}>\n              {spriteA.height && (\n                <img\n                  style={{\n                    height: (32 / Math.max(spriteA.height, spriteA.width)) * spriteA.height,\n                    width: (32 / Math.max(spriteA.height, spriteA.width)) * spriteA.width,\n                    display: \"block\",\n                    imageRendering: \"crisp-edges\",\n                  }}\n                  aria-label=\"Sprite A\"\n                  src={spriteA.src}\n                />\n              )}\n            </div>\n\n            <Text>Sprite 1</Text>\n            <input\n              type=\"file\"\n              onChange={(evt) => onFileSelected(evt, spriteASet, true)}\n              accept=\"image/*\"\n              aria-label=\"Drop an image here, or click to select\"\n            />\n          </Dropzone>\n\n          <Space h={1} w={1} />\n\n          <Dropzone\n            onDrop={(evt) => onFileSelected(evt, spriteBSet)}\n            onDragOver={eventIgnore}\n            onDragEnter={eventIgnore}>\n            <div\n              style={{\n                display: \"flex\",\n                height: 48,\n                width: 48,\n                alignItems: \"center\",\n                alignContent: \"center\",\n                justifyContent: \"center\",\n              }}>\n              {spriteB.height && (\n                <img\n                  style={{\n                    height: (32 / Math.max(spriteB.height, spriteB.width)) * spriteB.height,\n                    width: (32 / Math.max(spriteB.height, spriteB.width)) * spriteB.width,\n                    display: \"block\",\n                    imageRendering: \"crisp-edges\",\n                  }}\n                  aria-label=\"Sprite B\"\n                  src={spriteB.src}\n                />\n              )}\n            </div>\n\n            <Text>Sprite 2</Text>\n            <input\n              type=\"file\"\n              onChange={(evt) => onFileSelected(evt, spriteBSet)}\n              accept=\"image/*\"\n              aria-label=\"Drop an image here, or click to select\"\n            />\n          </Dropzone>\n        </Inline>\n        <Space h={2} />\n\n        <HeaderH2>Preview</HeaderH2>\n        <Space h={1} />\n        <style>{css}</style>\n        <div key={css} className=\"pixel\" />\n        <Space h={2} />\n        <Tabs>\n          <Inline>\n            <Tab info>\n              <Text>Pixel matching method:</Text>\n            </Tab>\n            {Object.keys(SORT_METHODS).map((sortMethodKey) => (\n              <Tab\n                active={sortMethod === sortMethodKey}\n                key={sortMethodKey}\n                onClick={() => {\n                  sortMethodSet(sortMethodKey);\n                }}>\n                <Text>{sortMethodKey}</Text>\n              </Tab>\n            ))}\n          </Inline>\n        </Tabs>\n        <Space h={1} />\n        <Tabs>\n          <Inline>\n            <Tab info>\n              <Text>Alternate:</Text>\n            </Tab>\n            <Tab\n              active={alternateAnimation === true}\n              onClick={() => {\n                alternateAnimationSet(true);\n              }}>\n              <Text>Yes</Text>\n            </Tab>\n            <Tab\n              active={alternateAnimation === false}\n              onClick={() => {\n                alternateAnimationSet(false);\n              }}>\n              <Text>No</Text>\n            </Tab>\n          </Inline>\n        </Tabs>\n        <Space h={1} />\n        <Inline h={-1}>\n          <Box flex={1} padding={[0.5, 1]} minWidth={\"240px\"}>\n            <Text>\n              Scale <span style={{ color: \"#666\" }}>{scale}</span>\n            </Text>\n            <Space h={1} />\n            <Range\n              aria-label=\"Scale\"\n              type=\"range\"\n              value={scale}\n              onChange={(e) => scaleSet(Number(e.target.value))}\n              min=\"1\"\n              max=\"25\"\n              step=\"0.5\"\n            />\n          </Box>\n\n          <Box flex={1} padding={[0.5, 1]} minWidth={\"240px\"}>\n            <Text>\n              Transition <span style={{ color: \"#666\" }}>{animationTransition}%</span>\n            </Text>\n            <Space h={1} />\n            <Range\n              aria-label=\"Transition Speed\"\n              type=\"range\"\n              value={animationTransition}\n              onChange={(e) => animationTransitionSet(e.target.value)}\n              min=\"1\"\n              max=\"100\"\n            />\n          </Box>\n\n          <Box flex={1} padding={[0.5, 1]} minWidth={\"240px\"}>\n            <Text>\n              Speed <span style={{ color: \"#666\" }}>{animationSpeed}ms</span>\n            </Text>\n            <Space h={1} />\n            <Range\n              aria-label=\"Animation Speed\"\n              type=\"range\"\n              value={animationSpeedSrc}\n              onChange={(e) => animationSpeedSet(e.target.value)}\n              step=\"0.5\"\n              min=\"2\"\n              max={Math.ceil(Math.pow(16384 / 2, 1 / LOG_SCALE_FACTOR))}\n            />\n          </Box>\n        </Inline>\n        <Space h={2} />\n        <HeaderH3>Code</HeaderH3>\n        <Space h={1} />\n        <code>\n          <Code aria-label=\"Generated code\" onChange={() => {}} className=\"code\" value={css} />\n        </code>\n        <Space h={1} />\n        {navigator && navigator.clipboard && navigator.clipboard.writeText && (\n          <Button\n            onClick={() => {\n              navigator.clipboard.writeText(css);\n            }}>\n            Copy Code\n          </Button>\n        )}\n        <Space h={2} />\n        <Text>\n          For a simpler image to box-shadow conversion, see <A href=\"https://javier.xyz/img2css/\">img2css</A>.\n        </Text>\n        <Space h={2} />\n        <Text>More unrelated experiments</Text>\n        <Space h={0.5} />\n        <Ul>\n          <Li>\n            <Text>\n              {\"Create more cohesive color schemes, \"}\n              <A href=\"https://javier.xyz/cohesive-colors/\">cohesive-colors</A>.\n            </Text>\n          </Li>\n          <Li>\n            <Text>\n              Find the visual center of your images / logos,{\" \"}\n              <A href=\"https://javier.xyz/visual-center/\">visual-center</A>.\n            </Text>\n          </Li>\n          <Li>\n            <Text>\n              JS AI Battle Game, <A href=\"https://clashjs.com/\">clashjs</A>.\n            </Text>\n          </Li>\n        </Ul>\n        <Space h={2} />\n        <Text>\n          Made by <A href=\"https://javier.xyz\">javierbyte</A>.\n        </Text>\n        <Space h={3} />\n      </Box>\n    </Container>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}