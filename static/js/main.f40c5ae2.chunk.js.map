{"version":3,"sources":["lib/compress-color.js","lib/read-image-as-base64.js","app.js","index.js"],"names":["componentToHex","c","hex","toString","length","compressColorRGB","rgbObj","rgb","r","g","b","Math","ceil","a","readImageAsBase64","url","callback","img","Image","crossOrigin","onload","canvas","document","createElement","ctx","getContext","height","this","width","drawImage","dataURL","toDataURL","src","base64ImageToRGBArray","base64ImageUtils","Sprite","Styled","max","display","imageRendering","defaultSprites","Yoshi","name","sprites","scale","transition","alternate","sortMethod","Square","Mario","Pikachu","Supermario","SORT_METHODS","Diagonal","color","floor","x","y","Vertical","Horizontal","Brightness","rgbArrayToShadow","rgbArray","_","chain","filter","pixel","sortBy","map","compact","value","join","saveFrame","path","config","stateSet","base64","err","maxY","reduce","res","Infinity","minY","min","maxX","minX","abs","App","animationSpeedSrc","animationSpeedSet","useState","round","pow","animationSpeed","animationTransition","animationTransitionSet","alternateAnimation","alternateAnimationSet","currentSprite","currentSpriteSet","sortMethodSet","scaleSet","spriteA","spriteASet","shadow","spriteB","spriteBSet","useEffect","location","href","undefined","totalWidth","totalHeight","css","translationX","translationY","trim","onFileSelected","event","setFunction","reverse","stopPropagation","preventDefault","dt","dataTransfer","file","files","target","fr","window","FileReader","async","base64src","data","currentTarget","result","base64Str","maxMass","Promise","resolve","originalWidth","originalHeight","sqrt","resizeImage","readAsDataURL","eventIgnore","accent","padding","h","style","fontWeight","backgroundColor","info","Object","keys","spriteKey","active","onClick","onDrop","evt","onDragOver","onDragEnter","alignItems","alignContent","justifyContent","aria-label","type","onChange","accept","w","className","sortMethodKey","flex","minWidth","e","Number","step","navigator","clipboard","writeText","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f40c5ae2.chunk.js","sourcesContent":["// import tinycolor from \"tinycolor2\";\n\nfunction componentToHex(c) {\n  const hex = c.toString(16);\n  return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nfunction rgbToHex(r, g, b) {\n  return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n\nfunction compressColorRGB(rgbObj) {\n  const rgb = `rgb(${rgbObj.r},${rgbObj.g},${rgbObj.b},${Math.ceil((rgbObj.a / 255) * 10) / 10})`;\n\n  if (rgbObj.a < 240) return rgb;\n\n  // const hex = tinycolor(rgb).toHexString();\n\n  const hex = rgbToHex(rgbObj.r, rgbObj.g, rgbObj.b);\n\n  switch (\n    hex // based on CSS3 supported color names http://www.w3.org/TR/css3-color/\n  ) {\n    case \"#c0c0c0\":\n      return \"silver\";\n    case \"#808080\":\n      return \"gray\";\n    case \"#800000\":\n      return \"maroon\";\n    case \"#ff0000\":\n      return \"red\";\n    case \"#800080\":\n      return \"purple\";\n    case \"#008000\":\n      return \"green\";\n    case \"#808000\":\n      return \"olive\";\n    case \"#000080\":\n      return \"navy\";\n    case \"#008080\":\n      return \"teal\";\n  }\n  return hex[1] === hex[2] && hex[3] === hex[4] && hex[5] === hex[6] ? \"#\" + hex[1] + hex[3] + hex[5] : hex;\n}\n\nexport default compressColorRGB;\n","function readImageAsBase64(url, callback) {\n  const img = new Image();\n  img.crossOrigin = \"Anonymous\";\n  img.onload = function () {\n    let canvas = document.createElement(\"CANVAS\");\n    const ctx = canvas.getContext(\"2d\");\n    canvas.height = this.height;\n    canvas.width = this.width;\n    ctx.drawImage(this, 0, 0);\n    const dataURL = canvas.toDataURL();\n    callback(dataURL);\n    canvas = null;\n  };\n  img.src = url;\n}\n\nexport default readImageAsBase64;\n","import React, { useEffect, useState } from \"react\";\n\nimport _ from \"lodash\";\nimport Styled from \"styled-components\";\nimport compressColorRGB from \"./lib/compress-color.js\";\nimport readImageAsBase64 from \"./lib/read-image-as-base64.js\";\n\nimport base64ImageUtils from \"base64-image-utils\";\nconst { base64ImageToRGBArray } = base64ImageUtils;\n\nimport {\n  JBX,\n  Button,\n  Range,\n  HeaderH1,\n  HeaderH3,\n  HeaderH2,\n  Text,\n  Space,\n  Box,\n  A,\n  Ul,\n  Li,\n  Container,\n  Dropzone,\n  Inline,\n  Tabs,\n  Tab,\n  Code,\n} from \"jbx\";\n\nconst Sprite = Styled.img(({ width, height }) => {\n  return {\n    height: (28 / Math.max(height, width)) * height,\n    width: (28 / Math.max(height, width)) * width,\n    display: \"block\",\n    imageRendering: \"pixelated\",\n  };\n});\n\nconst LOG_SCALE_FACTOR = 2.2;\n\nconst defaultSprites = {\n  Yoshi: {\n    name: \"Yoshi\",\n    sprites: [\"yoshi1.png\", \"yoshi2.png\"],\n  },\n  \"3 Dots\": {\n    name: \"3 Dots\",\n    sprites: [\"3dots1.png\", \"3dots2.png\"],\n    scale: 8,\n    transition: 80,\n    alternate: false,\n    sortMethod: \"Brightness\",\n  },\n  Square: {\n    name: \"Square\",\n    sprites: [\"square1.png\", \"square2.png\"],\n    scale: 12,\n    transition: 100,\n    alternate: false,\n    sortMethod: \"Brightness\",\n  },\n  Mario: {\n    name: \"Mario\",\n    sprites: [\"mario1.png\", \"mario2.png\"],\n  },\n  Pikachu: {\n    name: \"Pikachu\",\n    sprites: [\"pikachu.png\", \"raichu.png\"],\n    sortMethod: \"Brightness\",\n  },\n  Supermario: {\n    name: \"Super Mario\",\n    sprites: [\"supermario1.png\", \"supermario2.png\"],\n    sortMethod: \"Horizontal\",\n  },\n};\n\nfunction resizeImage(base64Str, maxMass = 64 * 50) {\n  return new Promise((resolve) => {\n    let img = new Image();\n    img.src = base64Str;\n    img.onload = () => {\n      let canvas = document.createElement(\"canvas\");\n\n      const originalWidth = img.width;\n      const originalHeight = img.height;\n\n      let width = img.width;\n      let height = img.height;\n\n      while (width * height > maxMass) {\n        width = width / Math.sqrt(2, 2);\n        height = height / Math.sqrt(2, 2);\n      }\n\n      width = Math.round(width);\n      height = Math.round(height);\n\n      canvas.width = width;\n      canvas.height = height;\n      let ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0, width, height);\n      resolve([canvas.toDataURL(), { originalWidth, originalHeight }]);\n    };\n  });\n}\n\nconst SORT_METHODS = {\n  Diagonal: [\n    (color) => {\n      return Math.floor((color.x - color.y) / 3);\n    },\n    (color) => {\n      return color.rgb.r + color.rgb.g + color.rgb.b;\n    },\n  ],\n  Vertical: [\n    (color) => {\n      return color.x;\n    },\n  ],\n  Horizontal: [\n    (color) => {\n      return color.y;\n    },\n  ],\n  Brightness: [\n    (color) => {\n      return Math.floor((color.rgb.r + color.rgb.g + color.rgb.b) / 2);\n    },\n  ],\n};\n\nfunction rgbArrayToShadow(rgbArray, { sortMethod = \"Brightness\", scale = 1 }) {\n  return _.chain(rgbArray)\n    .filter((pixel) => {\n      return !(pixel.rgb.a < 1 || (pixel.rgb.r > 254 && pixel.rgb.g > 254 && pixel.rgb.b > 254));\n    })\n    .sortBy(SORT_METHODS[sortMethod])\n    .map((pixel) => {\n      const color = compressColorRGB(pixel.rgb);\n      return `${color} ${(pixel.x + 1) * scale}px ${(pixel.y + 1) * scale}px`;\n    })\n    .compact()\n    .value()\n    .join(\",\");\n}\n\nfunction saveFrame(path, config, stateSet) {\n  readImageAsBase64(path, (base64) => {\n    base64ImageToRGBArray(base64, (err, rgbArray) => {\n      const maxY = rgbArray.reduce((res, rgb) => {\n        return Math.max(res, rgb.y);\n      }, -Infinity);\n      const minY = rgbArray.reduce((res, rgb) => {\n        return Math.min(res, rgb.y);\n      }, Infinity);\n\n      const maxX = rgbArray.reduce((res, rgb) => {\n        return Math.max(res, rgb.x);\n      }, -Infinity);\n      const minX = rgbArray.reduce((res, rgb) => {\n        return Math.min(res, rgb.x);\n      }, Infinity);\n\n      stateSet({\n        src: base64,\n        rgbArray,\n        height: Math.abs(maxY - minY) + 1,\n        width: Math.abs(maxX - minX) + 1,\n      });\n    });\n  });\n}\n\nfunction App() {\n  const [animationSpeedSrc, animationSpeedSet] = useState(Math.round(Math.pow(1000, 1 / LOG_SCALE_FACTOR)));\n  const animationSpeed = Math.round(Math.pow(animationSpeedSrc, LOG_SCALE_FACTOR)) + 11 + 16;\n  const [animationTransition, animationTransitionSet] = useState(25);\n  const [alternateAnimation, alternateAnimationSet] = useState(true);\n\n  const [currentSprite, currentSpriteSet] = useState(\"Yoshi\");\n  const [sortMethod, sortMethodSet] = useState(\"Vertical\");\n  const [scale, scaleSet] = useState(5);\n\n  const [spriteA, spriteASet] = useState({\n    shadow: null,\n    height: 5,\n    width: 5,\n  });\n  const [spriteB, spriteBSet] = useState({\n    shadow: null,\n    height: 5,\n    width: 5,\n  });\n\n  useEffect(() => {\n    if (!currentSprite) return;\n\n    saveFrame(`${document.location.href}/sprites/${defaultSprites[currentSprite].sprites[0]}`, { scale }, spriteASet);\n    saveFrame(`${document.location.href}/sprites/${defaultSprites[currentSprite].sprites[1]}`, { scale }, spriteBSet);\n\n    // const { scale = 3, transition = 25, alternate = false } = defaultSprites[currentSprite];\n\n    spriteASet({\n      shadow: null,\n      height: 0,\n      width: 0,\n    });\n    spriteBSet({\n      shadow: null,\n      height: 0,\n      width: 0,\n    });\n\n    scaleSet(defaultSprites[currentSprite].scale || 3);\n    animationTransitionSet(defaultSprites[currentSprite].transition || 25);\n    alternateAnimationSet(\n      defaultSprites[currentSprite].alternate === undefined ? true : defaultSprites[currentSprite].alternate\n    );\n    sortMethodSet(defaultSprites[currentSprite].sortMethod || \"Vertical\");\n  }, [currentSprite]);\n\n  const totalWidth = Math.max(spriteA.width, spriteB.width) * scale;\n  const totalHeight = Math.max(spriteA.height, spriteB.height) * scale;\n\n  const css = `\n@keyframes morphin {\n  0%, ${50 - animationTransition / 2}% {\n    box-shadow: ${rgbArrayToShadow(spriteA.rgbArray, {\n      scale,\n      sortMethod,\n      translationX: totalWidth / -2,\n      translationY: totalHeight / -2,\n    })};\n  }\n  ${50 + animationTransition / 2}%, 100% {\n    box-shadow: ${rgbArrayToShadow(spriteB.rgbArray, {\n      scale,\n      sortMethod,\n      translationX: totalWidth / -2,\n      translationY: totalHeight / -2,\n    })};\n  }\n}\n\n.pixel {\n  height: ${scale}px;\n  width: ${scale}px;\n  margin: ${-scale}px ${totalHeight + scale * 2}px ${totalWidth + scale * 2}px ${-scale}px;\n  animation: morphin ${animationSpeed}ms infinite${\n    alternateAnimation ? \" alternate \" : \" \"\n  }cubic-bezier(0.45, 0, 0.55, 1);\n}`.trim();\n\n  function onFileSelected(event, setFunction, reverse) {\n    currentSpriteSet(null);\n    event.stopPropagation();\n    event.preventDefault();\n\n    const dt = event.dataTransfer;\n    const files = dt ? dt.files : event.target.files;\n    const file = files[0];\n\n    const fr = new window.FileReader();\n\n    fr.onload = async (data) => {\n      const base64src = data.currentTarget.result;\n\n      const [base64] = await resizeImage(base64src);\n\n      saveFrame(base64, { scale, reverse }, setFunction);\n    };\n    fr.readAsDataURL(file);\n  }\n\n  function eventIgnore(event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  return (\n    <Container>\n      <JBX accent={\"#ab99cf\"} />\n      <Box padding={2}>\n        <Space h={1} />\n        <HeaderH1\n          style={{\n            fontWeight: 900,\n            display: \"inline-block\",\n            width: \"auto\",\n            padding: \"6px\",\n            backgroundColor: \"var(--accent-color)\",\n          }}>\n          morphin\n        </HeaderH1>\n        <Space h={1} />\n        <Text>\n          Tool that creates animated CSS transitions. Add sprites and get the code ready to paste in your site.\n        </Text>\n        <Space h={2} />\n        <Tabs>\n          <Inline>\n            <Tab info>\n              <Text>Examples: </Text>\n            </Tab>\n            {Object.keys(defaultSprites).map((spriteKey) => (\n              <Tab\n                active={currentSprite === spriteKey}\n                key={spriteKey}\n                onClick={() => {\n                  currentSpriteSet(spriteKey);\n                }}>\n                <Text>{spriteKey}</Text>\n              </Tab>\n            ))}\n          </Inline>\n        </Tabs>\n        <Space h={1} />\n        <Inline>\n          <Dropzone\n            onDrop={(evt) => onFileSelected(evt, spriteASet)}\n            onDragOver={eventIgnore}\n            onDragEnter={eventIgnore}>\n            <div\n              style={{\n                display: \"flex\",\n                height: 48,\n                width: 48,\n                alignItems: \"center\",\n                alignContent: \"center\",\n                justifyContent: \"center\",\n              }}>\n              <Sprite width={spriteA.width} height={spriteA.height} aria-label=\"Sprite A\" src={spriteA.src} />\n            </div>\n\n            <Text>Sprite 1</Text>\n            <input\n              type=\"file\"\n              onChange={(evt) => onFileSelected(evt, spriteASet, true)}\n              accept=\"image/*\"\n              aria-label=\"Drop an image here, or click to select\"\n            />\n          </Dropzone>\n\n          <Space h={1} w={1} />\n\n          <Dropzone\n            onDrop={(evt) => onFileSelected(evt, spriteBSet)}\n            onDragOver={eventIgnore}\n            onDragEnter={eventIgnore}>\n            <div\n              style={{\n                display: \"flex\",\n                height: 48,\n                width: 48,\n                alignItems: \"center\",\n                alignContent: \"center\",\n                justifyContent: \"center\",\n              }}>\n              <Sprite width={spriteB.width} height={spriteB.height} aria-label=\"Sprite B\" src={spriteB.src} />\n            </div>\n\n            <Text>Sprite 2</Text>\n            <input\n              type=\"file\"\n              onChange={(evt) => onFileSelected(evt, spriteBSet)}\n              accept=\"image/*\"\n              aria-label=\"Drop an image here, or click to select\"\n            />\n          </Dropzone>\n        </Inline>\n        <Space h={2} />\n\n        <HeaderH2>Preview</HeaderH2>\n        <Space h={1} />\n        <style>{css}</style>\n        <div key={css} className=\"pixel\" />\n        <Space h={2} />\n        <Tabs>\n          <Inline>\n            <Tab info>\n              <Text>Pixel matching method:</Text>\n            </Tab>\n            {Object.keys(SORT_METHODS).map((sortMethodKey) => (\n              <Tab\n                active={sortMethod === sortMethodKey}\n                key={sortMethodKey}\n                onClick={() => {\n                  sortMethodSet(sortMethodKey);\n                }}>\n                <Text>{sortMethodKey}</Text>\n              </Tab>\n            ))}\n          </Inline>\n        </Tabs>\n        <Space h={1} />\n        <Tabs>\n          <Inline>\n            <Tab info>\n              <Text>Alternate:</Text>\n            </Tab>\n            <Tab\n              active={alternateAnimation === true}\n              onClick={() => {\n                alternateAnimationSet(true);\n              }}>\n              <Text>Yes</Text>\n            </Tab>\n            <Tab\n              active={alternateAnimation === false}\n              onClick={() => {\n                alternateAnimationSet(false);\n              }}>\n              <Text>No</Text>\n            </Tab>\n          </Inline>\n        </Tabs>\n        <Space h={1} />\n        <Inline h={-1}>\n          <Box flex={1} padding={[0.5, 1]} minWidth={\"240px\"}>\n            <Text>\n              Scale <span style={{ color: \"#666\" }}>{scale}</span>\n            </Text>\n            <Space h={1} />\n            <Range\n              aria-label=\"Scale\"\n              type=\"range\"\n              value={scale}\n              onChange={(e) => scaleSet(Number(e.target.value))}\n              min=\"1\"\n              max=\"25\"\n              step=\"0.5\"\n            />\n          </Box>\n\n          <Box flex={1} padding={[0.5, 1]} minWidth={\"240px\"}>\n            <Text>\n              Transition <span style={{ color: \"#666\" }}>{animationTransition}%</span>\n            </Text>\n            <Space h={1} />\n            <Range\n              aria-label=\"Transition Speed\"\n              type=\"range\"\n              value={animationTransition}\n              onChange={(e) => animationTransitionSet(e.target.value)}\n              min=\"1\"\n              max=\"100\"\n            />\n          </Box>\n\n          <Box flex={1} padding={[0.5, 1]} minWidth={\"240px\"}>\n            <Text>\n              Speed <span style={{ color: \"#666\" }}>{animationSpeed}ms</span>\n            </Text>\n            <Space h={1} />\n            <Range\n              aria-label=\"Animation Speed\"\n              type=\"range\"\n              value={animationSpeedSrc}\n              onChange={(e) => animationSpeedSet(e.target.value)}\n              step=\"0.5\"\n              min=\"2\"\n              max={Math.ceil(Math.pow(16384 / 2, 1 / LOG_SCALE_FACTOR))}\n            />\n          </Box>\n        </Inline>\n        <Space h={2} />\n        <HeaderH3>Code</HeaderH3>\n        <Space h={1} />\n        <code>\n          <Code aria-label=\"Generated code\" onChange={() => {}} className=\"code\" value={css} />\n        </code>\n        <Space h={1} />\n        {navigator && navigator.clipboard && navigator.clipboard.writeText && (\n          <Button\n            onClick={() => {\n              navigator.clipboard.writeText(css);\n            }}>\n            Copy Code\n          </Button>\n        )}\n        <Space h={2} />\n        <Text>\n          For a simpler image to box-shadow conversion, see <A href=\"https://javier.xyz/img2css/\">img2css</A>.\n        </Text>\n        <Space h={2} />\n        <Text>More unrelated experiments</Text>\n        <Space h={0.5} />\n        <Ul>\n          <Li>\n            <Text>\n              {\"Create more cohesive color schemes, \"}\n              <A href=\"https://javier.xyz/cohesive-colors/\">cohesive-colors</A>.\n            </Text>\n          </Li>\n          <Li>\n            <Text>\n              Find the visual center of your images / logos,{\" \"}\n              <A href=\"https://javier.xyz/visual-center/\">visual-center</A>.\n            </Text>\n          </Li>\n          <Li>\n            <Text>\n              JS AI Battle Game, <A href=\"https://clashjs.com/\">clashjs</A>.\n            </Text>\n          </Li>\n        </Ul>\n        <Space h={2} />\n        <Text>\n          Made by <A href=\"https://javier.xyz\">javierbyte</A>.\n        </Text>\n        <Space h={3} />\n      </Box>\n    </Container>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}